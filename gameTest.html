<img src="img/trash.png" id="trashCan">
<!--
<img src="img/paper_ball.png" id="styrofoam">
<img src="img/paper_ball.png" id="paper">
<img src="img/paper_ball.png" id="plastic">
-->
<link rel="stylesheet" type="text/css" href="gameTest.css">
<div id = "displayScore"></div>
</div>
<script src="js/lib.js"></script>
<script>

let displayScore = document.getElementById("displayScore");
var score = 0;
var lives = 3;
let testObj=document.getElementById("trashCan");
testObj.style.position="absolute"

customElements.define('game-trash',
  class extends HTMLElement {
    constructor() {
      super();
    }
    connectedCallback(){
        this.class="trash";
        this.img = document.createElement("img");
        this.y=0;
        this.style.position="absolute";
        this.style.left=(Math.random()*600)+"px";
        this.style.top="0px";
        this.typeNum = Math.ceil(Math.random()*3);
        if (this.typeNum == 1){
        this.type = "Paper";
        this.img.src="img/paper_ball.png";
        } else if (this.typeNum == 2){
        this.type = "Styrofoam";
        } else if (this.typeNum == 3){
        this.type = "Plastic";
        }
        this.appendChild(this.img);
        //document.body.appendChild(this);
        requestAnimationFrame(() => {
                this.draw(this);
        });
    }
    draw(self){
        if(self.y>innerHeight)document.body.removeChild(self);
        self.y+=5;
        self.style.top=self.y+"px";
        requestAnimationFrame(()=>{self.draw(self)});
    }
    
})

let TrashCan = {
  x: 300,
  y: innerHeight-100
}

function incrementScore(){
  if (Trash.y == TrashCan.y){
    if (Math.abs(Trash.x == TrashCan.x) < 10){
      score += 1;
    }
    else if (Math.abs(Trash.x == TrashCan.x) > 10){
      lives -=1;
    }
  }
  if (lives == 0){
    gameOver();
  }
}

window.requestAnimationFrame(draw);
function draw() {
  move();
  displayScore.innerText(score);
  window.requestAnimationFrame(draw);
}

let move = () =>{
  if(KeyIsDown("ArrowLeft")){
    //do something
    TrashCan.x-=5;
  }
  if(KeyIsDown("ArrowRight")){
    TrashCan.x+=5;

  }
  testObj.style.left=TrashCan.x+"px";
  testObj.style.top=TrashCan.y+"px";
}
let produceTrash = () =>{
    document.body.appendChild(document.createElement("game-trash"));
}

</script>